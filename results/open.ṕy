"""
Simple simulation to test the surface code simulation is working
without looking at plots.

created-on: 09/12/17
@author: eduardo
"""
import sys
import json
import numpy as np
from os.path import dirname, realpath


def get_file_name(params):
    protocol = "protocol=" + params["protocol"]
    topology = "topology=" + params["topology"]
    distance = "distance=" + params["distance"]
    iterations = "iterations=" + params["iterations"]
    cycles = "cycles=" + params["cycles"]
    eta = "eta=" + params["eta"]
    a0 = "a0=" + params["a0"]
    a1 = "a1=" + params["a1"]
    time = "time=" + params["time"]

    param_names = [protocol, topology, distance, iterations, cycles,
                   eta, a0, a1, time]
    file_name = "_".join(param_names)
    return file_name


# Set parameters
parameters = {"topology": "toric",
              "cycles": 50,
              "iterations": 500,
              "protocol": "GHZ",
              "eta": 0.01,
              "a1": 0.0125,
              "time": 0.30347}

for a0 in [2.0]:
    for distance in [8, 12, 16, 20]:

        parameters["distance"] = distance
        parameters["a0"] = a0

        args_str = json.dumps(parameters)
        script_path = dirname(realpath(__file__))
        file_name = get_file_name(parameters)
        np.load(file_name)

        print("Distance: ", distance)
        print("a0: ", a0)
        print("--------------------")
